{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n  form: document.querySelector(\".form\"),\n  button: document.querySelector(\"button\")\n}\n\nrefs.form.addEventListener('submit', onSubmitPromise)\n\nconst formData = {};\nlet counter = 0;\nlet DELAY = null;\n\nfunction onSubmitPromise(evt) {\n  evt.preventDefault();\n  const { delay, step, amount } = evt.currentTarget.elements;\n\n  formData[delay.name] = delay.value\n  formData[step.name] = step.value\n  formData[amount.name] = amount.value\n\n  const FIRST_DELAY = Number(formData.delay);\n  const STEP = Number(formData.step)\n\n  const idCreatePromise = setInterval(() => {\n    counter += 1;\n    DELAY = FIRST_DELAY + STEP * counter;\n\n    createPromise(counter, DELAY)\n\n    if (counter === AMOUNT) {\n      return clearInterval(idCreatePromise);\n    }\n  }, DELAY)\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  const promises = new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve(iziToast.success({\n        title: 'OK',\n        message: `✅ Fulfilled promise ${position} in ${delay}ms`,\n        position: 'topRight',\n        timeout: 3000,\n      }))\n    } else {\n      reject(iziToast.error({\n        title: 'ERROR',\n        message: `❌ Rejected promise ${position} in ${delay}ms`,\n        position: 'topRight',\n        timeout: 3000,\n      }))\n    }\n  })\n  return promises.then(resp => console.log(resp)).catch(err => console.log(err))\n}\n\n"],"names":["refs","onSubmitPromise","formData","counter","DELAY","evt","delay","step","amount","FIRST_DELAY","STEP","idCreatePromise","createPromise","position","shouldResolve","resolve","reject","iziToast","resp","err"],"mappings":"wIAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,QAAQ,CACzC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAe,EAEpD,MAAMC,EAAW,CAAA,EACjB,IAAIC,EAAU,EACVC,EAAQ,KAEZ,SAASH,EAAgBI,EAAK,CAC5BA,EAAI,eAAc,EAClB,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAQ,EAAGH,EAAI,cAAc,SAElDH,EAASI,EAAM,MAAQA,EAAM,MAC7BJ,EAASK,EAAK,MAAQA,EAAK,MAC3BL,EAASM,EAAO,MAAQA,EAAO,MAE/B,MAAMC,EAAc,OAAOP,EAAS,KAAK,EACnCQ,EAAO,OAAOR,EAAS,IAAI,EAE3BS,EAAkB,YAAY,IAAM,CAMxC,GALAR,GAAW,EACXC,EAAQK,EAAcC,EAAOP,EAE7BS,EAAcT,EAASC,CAAK,EAExBD,IAAY,OACd,OAAO,cAAcQ,CAAe,CAEvC,EAAEP,CAAK,CACV,CAEA,SAASQ,EAAcC,EAAUP,EAAO,CACtC,MAAMQ,EAAgB,KAAK,OAAM,EAAK,GAmBtC,OAjBiB,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC5CF,EACFC,EAAQE,EAAS,QAAQ,CACvB,MAAO,KACP,QAAS,uBAAuBJ,QAAeP,MAC/C,SAAU,WACV,QAAS,GACjB,CAAO,CAAC,EAEFU,EAAOC,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,sBAAsBJ,QAAeP,MAC9C,SAAU,WACV,QAAS,GACjB,CAAO,CAAC,CAER,CAAG,EACe,KAAKY,GAAQ,QAAQ,IAAIA,CAAI,CAAC,EAAE,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAC/E"}