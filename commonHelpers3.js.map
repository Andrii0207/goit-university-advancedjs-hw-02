{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n  form: document.querySelector(\".form\"),\n  button: document.querySelector(\"button\")\n}\n\nrefs.form.addEventListener('submit', onSubmitPromise)\n\nconst formData = {};\n\nfunction onSubmitPromise(evt) {\n  evt.preventDefault();\n  const { delay, step, amount } = evt.target;\n\n  formData[delay.name] = delay.value\n  formData[step.name] = step.value\n  formData[amount.name] = amount.value\n\n  onStartPromise(formData)\n\n  refs.form.reset()\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n\n    setTimeout((() => {\n      if (shouldResolve) {\n        resolve({ position, delay })\n      } else {\n        reject({ position, delay })\n      }\n    }), delay)\n  })\n}\n\nfunction onStartPromise(formData) {\n  const { delay, step, amount } = formData;\n\n  const FIRST_DELAY = Number(delay);\n  const STEP = Number(step);\n  const AMOUNT = Number(amount);\n\n  for (let i = 1; i <= AMOUNT; i += 1) {\n    let DELAY = FIRST_DELAY + STEP * (i - 1);\n\n    createPromise(i, DELAY)\n      .then(({ position, delay }) => (iziToast.success({\n        title: 'OK',\n        message: `✅ Fulfilled promise ${position} in ${delay}ms`,\n        timeout: 3000,\n        position: 'topRight',\n      })))\n      .catch(({ position, delay }) => (iziToast.error({\n        title: 'ERROR',\n        message: `❌ Rejected promise ${position} in ${delay}ms`,\n        timeout: 3000,\n        position: 'topRight',\n      })))\n  }\n}\n\n\n"],"names":["refs","onSubmitPromise","formData","evt","delay","step","amount","onStartPromise","createPromise","position","shouldResolve","resolve","reject","FIRST_DELAY","STEP","AMOUNT","i","DELAY","iziToast"],"mappings":"wIAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,QAAQ,CACzC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAe,EAEpD,MAAMC,EAAW,CAAA,EAEjB,SAASD,EAAgBE,EAAK,CAC5BA,EAAI,eAAc,EAClB,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAM,EAAKH,EAAI,OAEpCD,EAASE,EAAM,MAAQA,EAAM,MAC7BF,EAASG,EAAK,MAAQA,EAAK,MAC3BH,EAASI,EAAO,MAAQA,EAAO,MAE/BC,EAAeL,CAAQ,EAEvBF,EAAK,KAAK,MAAO,CACnB,CAEA,SAASQ,EAAcC,EAAUL,EAAO,CACtC,MAAMM,EAAgB,KAAK,OAAM,EAAK,GAEtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CAEtC,WAAY,IAAM,CACZF,EACFC,EAAQ,CAAE,SAAAF,EAAU,MAAAL,EAAO,EAE3BQ,EAAO,CAAE,SAAAH,EAAU,MAAAL,EAAO,CAE7B,EAAGA,CAAK,CACb,CAAG,CACH,CAEA,SAASG,EAAeL,EAAU,CAChC,KAAM,CAAE,MAAAE,EAAO,KAAAC,EAAM,OAAAC,CAAM,EAAKJ,EAE1BW,EAAc,OAAOT,CAAK,EAC1BU,EAAO,OAAOT,CAAI,EAClBU,EAAS,OAAOT,CAAM,EAE5B,QAASU,EAAI,EAAGA,GAAKD,EAAQC,GAAK,EAAG,CACnC,IAAIC,EAAQJ,EAAcC,GAAQE,EAAI,GAEtCR,EAAcQ,EAAGC,CAAK,EACnB,KAAK,CAAC,CAAE,SAAAR,EAAU,MAAAL,CAAK,IAAQc,EAAS,QAAQ,CAC/C,MAAO,KACP,QAAS,uBAAuBT,QAAeL,MAC/C,QAAS,IACT,SAAU,UACX,CAAA,CAAE,EACF,MAAM,CAAC,CAAE,SAAAK,EAAU,MAAAL,CAAK,IAAQc,EAAS,MAAM,CAC9C,MAAO,QACP,QAAS,sBAAsBT,QAAeL,MAC9C,QAAS,IACT,SAAU,UACX,CAAA,CAAE,CACN,CACH"}