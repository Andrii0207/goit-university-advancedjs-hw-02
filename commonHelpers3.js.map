{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n  form: document.querySelector(\".form\"),\n  button: document.querySelector(\"button\")\n}\n\nrefs.form.addEventListener('submit', onSubmitPromise)\n\nconst formData = {};\n\nfunction onSubmitPromise(evt) {\n  evt.preventDefault();\n  const { delay, step, amount } = evt.currentTarget.elements;\n\n  formData[delay.name] = delay.value\n  formData[step.name] = step.value\n  formData[amount.name] = amount.value\n\n  const FIRST_DELAY = Number(formData.delay);\n  const AMOUNT = Number(formData.amount);\n  const STEP = Number(formData.step)\n  let counter = 0;\n  let DELAY = FIRST_DELAY;\n\n  const idCreatePromise = setInterval(() => {\n    counter += 1;\n    DELAY = FIRST_DELAY + STEP * (counter - 1);\n    createPromise(counter, DELAY)\n\n    if (counter === AMOUNT) {\n      return clearInterval(idCreatePromise);\n    }\n  }, DELAY)\n  refs.form.reset()\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  const promises = new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve(iziToast.success({\n        title: 'OK',\n        message: `✅ Fulfilled promise ${position} in ${delay}ms`,\n        position: 'topRight',\n        timeout: 3000,\n      }))\n    } else {\n      reject(iziToast.error({\n        title: 'ERROR',\n        message: `❌ Rejected promise ${position} in ${delay}ms`,\n        position: 'topRight',\n        timeout: 3000,\n      }))\n    }\n  })\n  console.log(promises)\n  return promises.then(resp => console.log(resp)).catch(err => console.log(err))\n}\n"],"names":["refs","onSubmitPromise","formData","evt","delay","step","amount","FIRST_DELAY","AMOUNT","STEP","counter","DELAY","idCreatePromise","createPromise","position","shouldResolve","promises","resolve","reject","iziToast","resp","err"],"mappings":"wIAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,QAAQ,CACzC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAe,EAEpD,MAAMC,EAAW,CAAA,EAEjB,SAASD,EAAgBE,EAAK,CAC5BA,EAAI,eAAc,EAClB,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAQ,EAAGH,EAAI,cAAc,SAElDD,EAASE,EAAM,MAAQA,EAAM,MAC7BF,EAASG,EAAK,MAAQA,EAAK,MAC3BH,EAASI,EAAO,MAAQA,EAAO,MAE/B,MAAMC,EAAc,OAAOL,EAAS,KAAK,EACnCM,EAAS,OAAON,EAAS,MAAM,EAC/BO,EAAO,OAAOP,EAAS,IAAI,EACjC,IAAIQ,EAAU,EACVC,EAAQJ,EAEZ,MAAMK,EAAkB,YAAY,IAAM,CAKxC,GAJAF,GAAW,EACXC,EAAQJ,EAAcE,GAAQC,EAAU,GACxCG,EAAcH,EAASC,CAAK,EAExBD,IAAYF,EACd,OAAO,cAAcI,CAAe,CAEvC,EAAED,CAAK,EACRX,EAAK,KAAK,MAAO,CACnB,CAEA,SAASa,EAAcC,EAAUV,EAAO,CACtC,MAAMW,EAAgB,KAAK,OAAM,EAAK,GAEhCC,EAAW,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC5CH,EACFE,EAAQE,EAAS,QAAQ,CACvB,MAAO,KACP,QAAS,uBAAuBL,QAAeV,MAC/C,SAAU,WACV,QAAS,GACjB,CAAO,CAAC,EAEFc,EAAOC,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,sBAAsBL,QAAeV,MAC9C,SAAU,WACV,QAAS,GACjB,CAAO,CAAC,CAER,CAAG,EACD,eAAQ,IAAIY,CAAQ,EACbA,EAAS,KAAKI,GAAQ,QAAQ,IAAIA,CAAI,CAAC,EAAE,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAC/E"}