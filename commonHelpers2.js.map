{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n\nconst refs = {\n    input: document.querySelector(\"#datetime-picker\"),\n    start: document.querySelector('button[data-start]'),\n    days: document.querySelector('span[data-days]'),\n    hours: document.querySelector('span[data-hours]'),\n    minutes: document.querySelector('span[data-minutes]'),\n    seconds: document.querySelector('span[data-seconds]')\n}\n\nrefs.start.addEventListener('click', onStartCountDown)\nrefs.start.setAttribute(\"disabled\", \"true\")\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    selectedDate: null,\n    onClose(selectedDates) {\n        options.selectedDate = selectedDates;\n        const currentDate = options.defaultDate.getTime();\n        const choosenDate = selectedDates[0].getTime();\n\n        if (choosenDate < currentDate) {\n            return iziToast.warning({\n                title: 'Caution',\n                message: \"Please choose a date in the future\",\n                position: 'topCenter',\n                timeout: 3000,\n            });\n        }\n        refs.start.removeAttribute(\"disabled\")\n    },\n};\n\nflatpickr(refs.input, options)\n\nfunction onStartCountDown() {\n    const DELAY = 1000;\n    const id = setInterval((() => {\n        const currentDate = new Date().getTime();\n        const selectedDate = options.selectedDate[0].getTime();\n        const deltaTime = selectedDate - currentDate;\n        convertMs(deltaTime)\n\n        if (deltaTime === 0) {\n            removeAttribute(id)\n            return;\n        }\n    }), DELAY)\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return addLeadingZero({ days, hours, minutes, seconds });\n}\n\nfunction addLeadingZero(obj) {\n    const { days, hours, minutes, seconds } = obj\n\n    const day = String(days).padStart(2, 0)\n    const hour = String(hours).padStart(2, 0)\n    const minute = String(minutes).padStart(2, 0)\n    const second = String(seconds).padStart(2, 0)\n\n    return createMarkup({ day, hour, minute, second })\n}\n\nfunction createMarkup({ day, hour, minute, second }) {\n    refs.days.innerHTML = day;\n    refs.hours.innerHTML = hour;\n    refs.minutes.innerHTML = minute;\n    refs.seconds.innerHTML = second;\n}"],"names":["refs","onStartCountDown","options","selectedDates","currentDate","iziToast","flatpickr","id","deltaTime","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","obj","day","hour","minute","second","createMarkup"],"mappings":"+IAKA,MAAMA,EAAO,CACT,MAAO,SAAS,cAAc,kBAAkB,EAChD,MAAO,SAAS,cAAc,oBAAoB,EAClD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACxD,EAEAA,EAAK,MAAM,iBAAiB,QAASC,CAAgB,EACrDD,EAAK,MAAM,aAAa,WAAY,MAAM,EAE1C,MAAME,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,aAAc,KACd,QAAQC,EAAe,CACnBD,EAAQ,aAAeC,EACvB,MAAMC,EAAcF,EAAQ,YAAY,QAAO,EAG/C,GAFoBC,EAAc,GAAG,QAAO,EAE1BC,EACd,OAAOC,EAAS,QAAQ,CACpB,MAAO,UACP,QAAS,qCACT,SAAU,YACV,QAAS,GACzB,CAAa,EAELL,EAAK,MAAM,gBAAgB,UAAU,CACxC,CACL,EAEAM,EAAUN,EAAK,MAAOE,CAAO,EAE7B,SAASD,GAAmB,CAExB,MAAMM,EAAK,YAAa,IAAM,CAC1B,MAAMH,EAAc,IAAI,KAAM,EAAC,QAAO,EAEhCI,EADeN,EAAQ,aAAa,GAAG,QAAO,EACnBE,EAGjC,GAFAK,EAAUD,CAAS,EAEfA,IAAc,EAAG,CACjB,gBAAgBD,CAAE,EAClB,MACH,CACJ,EAAG,GAAK,CACb,CAEA,SAASE,EAAUC,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,OAAOK,EAAe,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,CAC3D,CAEA,SAASC,EAAeC,EAAK,CACzB,KAAM,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGE,EAEpCC,EAAM,OAAON,CAAI,EAAE,SAAS,EAAG,CAAC,EAChCO,EAAO,OAAON,CAAK,EAAE,SAAS,EAAG,CAAC,EAClCO,EAAS,OAAON,CAAO,EAAE,SAAS,EAAG,CAAC,EACtCO,EAAS,OAAON,CAAO,EAAE,SAAS,EAAG,CAAC,EAE5C,OAAOO,EAAa,CAAE,IAAAJ,EAAK,KAAAC,EAAM,OAAAC,EAAQ,OAAAC,CAAM,CAAE,CACrD,CAEA,SAASC,EAAa,CAAE,IAAAJ,EAAK,KAAAC,EAAM,OAAAC,EAAQ,OAAAC,CAAM,EAAI,CACjDpB,EAAK,KAAK,UAAYiB,EACtBjB,EAAK,MAAM,UAAYkB,EACvBlB,EAAK,QAAQ,UAAYmB,EACzBnB,EAAK,QAAQ,UAAYoB,CAC7B"}